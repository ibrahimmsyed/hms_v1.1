"use strict";(self.webpackChunk_hms_hmsv1_1=self.webpackChunk_hms_hmsv1_1||[]).push([[7748],{68534:function(e,n,r){r.r(n),r.d(n,{default:function(){return F}});var t=r(12488),i=r(22650),a=r(97890),o=r(43265),s=r(48175),l=r(11338),c=r(95597),d=r(71361),u=r(67871),m=r(93433),p=r(15861),x=r(29439),h=r(1413),f=r(87757),v=r.n(f),j=r(28089),Z=r(47313),g=r(58908),b=r(75627),y=r(1432),w=r(17798),S=r(32703),C=r(61113),N=r(9019),P=r(73428),R=r(57829),L=r(15082),q=r(35898),A=r(51629),I=r(66835),M=r(57861),_=r(88564),B=r(76221),D=r(5239),U=(r(42785),r(62677)),G=r(55844),T=r(86853),k=r(40844),W=r(66429),z=r(67906),E=r(46417);function V(e){var n=e.isEdit,r=e.currentUser,t=(0,a.s0)(),i=(0,g.Ds)().enqueueSnackbar,o=(0,_.ZP)(C.Z)((function(e){var n=e.theme;return(0,h.Z)((0,h.Z)({},n.typography.subtitle2),{},{color:n.palette.text.secondary,marginBottom:n.spacing(1)})})),l=(0,D.v9)((function(e){return e.product})),d=(l.products,l.isLoading),u=[{id:"name",label:"History",align:"left"},{id:""}],f=(0,W.ZP)({defaultOrderBy:"createdAt"}),V=f.dense,F=f.page,O=f.order,Q=f.orderBy,K=f.rowsPerPage,X=(f.setPage,f.selected),H=(f.setSelected,f.onSelectRow),$=f.onSelectAllRows,J=f.onSort,Y=(f.onChangeDense,f.onChangePage,f.onChangeRowsPerPage,(0,Z.useState)([])),ee=(0,x.Z)(Y,2),ne=ee[0],re=(ee[1],j.Ry().shape({name:j.Z_().required("Name is required"),email:j.Z_().required("Email is required").email(),phoneNumber:j.Z_().required("Phone number is required"),address:j.Z_().required("Address is required"),country:j.Z_().required("country is required"),company:j.Z_().required("Company is required"),state:j.Z_().required("State is required"),city:j.Z_().required("City is required"),role:j.Z_().required("Role Number is required"),avatarUrl:j.nK().test("required","Avatar is required",(function(e){return""!==e}))})),te=(0,Z.useMemo)((function(){return{name:(null===r||void 0===r?void 0:r.name)||"",email:(null===r||void 0===r?void 0:r.email)||"",phoneNumber:(null===r||void 0===r?void 0:r.phoneNumber)||"",address:(null===r||void 0===r?void 0:r.address)||"",country:(null===r||void 0===r?void 0:r.country)||"",state:(null===r||void 0===r?void 0:r.state)||"",city:(null===r||void 0===r?void 0:r.city)||"",zipCode:(null===r||void 0===r?void 0:r.zipCode)||"",avatarUrl:(null===r||void 0===r?void 0:r.avatarUrl)||"",isVerified:(null===r||void 0===r?void 0:r.isVerified)||!0,status:null===r||void 0===r?void 0:r.status,company:(null===r||void 0===r?void 0:r.company)||"",role:(null===r||void 0===r?void 0:r.role)||""}}),[r]),ie=(0,b.cI)({resolver:(0,y.X)(re),defaultValues:te}),ae=ie.reset,oe=ie.watch,se=ie.control,le=ie.setValue,ce=ie.handleSubmit,de=ie.formState.isSubmitting,ue=oe();(0,Z.useEffect)((function(){n&&r&&ae(te),n||ae(te)}),[n,r]);var me=function(){var e=(0,p.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:ae(),i(n?"Update success!":"Create success!"),t(s.vB.user.list),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),pe=(0,Z.useCallback)((function(e){var n=e[0];n&&le("avatarUrl",Object.assign(n,{preview:URL.createObjectURL(n)}))}),[le]),xe=V?60:80,he=(0,Z.useState)(""),fe=(0,x.Z)(he,2),ve=fe[0],je=(fe[1],function(e){var n=e.tableData,r=e.comparator,t=e.filterName,i=n.map((function(e,n){return[e,n]}));i.sort((function(e,n){var t=r(e[0],n[0]);return 0!==t?t:e[1]-n[1]})),n=i.map((function(e){return e[0]})),t&&(n=n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())})));return n}({tableData:ne,comparator:(0,W.sQ)(O,Q),filterName:ve})),Ze=!je.length&&!!ve||!d&&!je.length;return(0,E.jsx)(k.RV,{methods:ie,onSubmit:ce(me),children:(0,E.jsxs)(N.ZP,{container:!0,spacing:3,children:[(0,E.jsx)(N.ZP,{item:!0,xs:12,md:8,children:(0,E.jsxs)(P.Z,{sx:{p:3,display:"grid",rowGap:3},children:[(0,E.jsxs)(R.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,E.jsx)(k.au,{name:"name",label:"Patient Name"}),(0,E.jsx)(k.au,{name:"id",label:"Patient Id"}),(0,E.jsx)(k.au,{name:"aid",label:"Aadhaar Id"}),(0,E.jsxs)("div",{children:[(0,E.jsx)(o,{children:"Gender"}),(0,E.jsx)(k.km,{name:"gender",options:["Men","Women","Kids"],sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),(0,E.jsx)(b.Qr,{name:"dob",control:se,render:function(e){var n=e.field;return(0,E.jsx)(w.Z,(0,h.Z)((0,h.Z)({},n),{},{label:"Date of Birth",inputFormat:"dd/MM/yyyy",renderInput:function(e){return(0,E.jsx)(L.Z,(0,h.Z)((0,h.Z)({},e),{},{fullWidth:!0}))}}))}}),(0,E.jsx)(b.Qr,{name:"anniversary",control:se,render:function(e){var n=e.field;return(0,E.jsx)(w.Z,(0,h.Z)((0,h.Z)({},n),{},{label:"Anniversary",inputFormat:"dd/MM/yyyy",renderInput:function(e){return(0,E.jsx)(L.Z,(0,h.Z)((0,h.Z)({},e),{},{fullWidth:!0}))}}))}}),(0,E.jsxs)(k.Cc,{name:"bloodgroup",label:"Blood Group",placeholder:"Blood Group",children:[(0,E.jsx)("option",{value:""}),c.hW.map((function(e){return(0,E.jsx)("option",{value:e.label,children:e.label},e.code)}))]}),(0,E.jsxs)(R.Z,{sx:{display:"grid",columnGap:2,rowGap:5,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,E.jsxs)(k.Cc,{name:"relation",label:"Relation",placeholder:"Relation",children:[(0,E.jsx)("option",{value:""}),c.hW.map((function(e){return(0,E.jsx)("option",{value:e.label,children:e.label},e.code)}))]}),(0,E.jsx)(k.au,{name:"name",label:"Name"})]})]}),(0,E.jsxs)(R.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,E.jsx)(k.au,{name:"primaryPhoneNumber",label:"Primary Mobile No."}),(0,E.jsx)(k.au,{name:"secondaryPhoneNumber",label:"Secondary Mobile No."}),(0,E.jsxs)(k.Cc,{name:"languagePreference",label:"Language Preference",placeholder:"Language Preference",children:[(0,E.jsx)("option",{value:""}),c.hW.map((function(e){return(0,E.jsx)("option",{value:e.label,children:e.label},e.code)}))]}),(0,E.jsx)(k.au,{name:"slandLineNumber",label:"Land Line Nos."}),(0,E.jsx)(k.au,{name:"email",label:"Email Address"}),(0,E.jsx)(k.au,{name:"streetaddress",label:"Street Address"}),(0,E.jsx)(k.au,{name:"locality",label:"Locality"}),(0,E.jsx)(k.au,{name:"city",label:"City"}),(0,E.jsx)(k.au,{name:"zipCode",label:"Pincode"})]}),(0,E.jsx)(q.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,E.jsx)(S.Z,{type:"submit",variant:"contained",loading:de,children:n?"Save Changes":"Create User"})})]})}),(0,E.jsxs)(N.ZP,{item:!0,xs:12,md:4,children:[(0,E.jsxs)(P.Z,{sx:{py:10,px:3,marginBottom:3},children:[n&&(0,E.jsx)(T.Z,{color:"active"!==ue.status?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:ue.status}),(0,E.jsx)(R.Z,{sx:{mb:5},children:(0,E.jsx)(k.sX,{name:"avatarUrl",accept:"image/*",maxSize:3145728,onDrop:pe,helperText:(0,E.jsxs)(C.Z,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,E.jsx)("br",{})," max size of ",(0,B.oe)(3145728)]})})})]}),(0,E.jsxs)(P.Z,{sx:{py:10,px:3,display:"grid",rowGap:2,marginBottom:3},children:[(0,E.jsx)(q.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,E.jsx)(S.Z,{type:"submit",variant:"contained",loading:de,children:"Add New"})}),(0,E.jsx)(U.Z,{children:(0,E.jsxs)(A.Z,{sx:{minWidth:0},children:[X.length>0&&(0,E.jsx)(G.Nl,{dense:V,numSelected:X.length,rowCount:ne.length,onSelectAllRows:function(e){return $(e,ne.map((function(e){return e.id})))}}),(0,E.jsxs)(I.Z,{size:V?"small":"medium",children:[(0,E.jsx)(G.K,{order:O,orderBy:Q,headLabel:u,rowCount:ne.length,numSelected:X.length,onSort:J,onSelectAllRows:function(e){return $(e,ne.map((function(e){return e.id})))}}),(0,E.jsxs)(M.Z,{children:[(d?(0,m.Z)(Array(K)):je).slice(F*K,F*K+K).map((function(e,n){return e?(0,E.jsx)(z.l,{row:e,selected:X.includes(e.id),onSelectRow:function(){return H(e.id)}},e.id):!Ze&&(0,E.jsx)(G.hM,{sx:{height:xe}},n)})),(0,E.jsx)(G.$W,{height:xe,emptyRows:(0,W.fQ)(F,K,ne.length)}),(0,E.jsx)(G.et,{isNotFound:Ze})]})]})]})})]}),(0,E.jsxs)(P.Z,{sx:{py:10,px:3,display:"grid",rowGap:2,marginBottom:3},children:[(0,E.jsx)(q.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,E.jsx)(S.Z,{type:"submit",variant:"contained",loading:de,children:"Add New"})}),(0,E.jsx)(U.Z,{children:(0,E.jsxs)(A.Z,{sx:{minWidth:0},children:[X.length>0&&(0,E.jsx)(G.Nl,{dense:V,numSelected:X.length,rowCount:ne.length,onSelectAllRows:function(e){return $(e,ne.map((function(e){return e.id})))}}),(0,E.jsxs)(I.Z,{size:V?"small":"medium",children:[(0,E.jsx)(G.K,{order:O,orderBy:Q,headLabel:u,rowCount:ne.length,numSelected:X.length,onSort:J,onSelectAllRows:function(e){return $(e,ne.map((function(e){return e.id})))}}),(0,E.jsxs)(M.Z,{children:[(d?(0,m.Z)(Array(K)):je).slice(F*K,F*K+K).map((function(e,n){return e?(0,E.jsx)(z.l,{row:e,selected:X.includes(e.id),onSelectRow:function(){return H(e.id)}},e.id):!Ze&&(0,E.jsx)(G.hM,{sx:{height:xe}},n)})),(0,E.jsx)(G.$W,{height:xe,emptyRows:(0,W.fQ)(F,K,ne.length)}),(0,E.jsx)(G.et,{isNotFound:Ze})]})]})]})})]})]})]})})}function F(){var e=(0,l.Z)().themeStretch,n=(0,a.TH)().pathname,r=(0,a.UO)().name,m=void 0===r?"":r,p=n.includes("edit"),x=c.Xz.find((function(e){return(0,t.o)(e.name)===m}));return(0,E.jsx)(d.Z,{title:"User: Create a new user",children:(0,E.jsxs)(o.Z,{maxWidth:!e&&"lg",children:[(0,E.jsx)(u.Z,{heading:p?"Edit user":"Create a new user",links:[{name:"Dashboard",href:s.vB.root},{name:"Patient",href:s.vB.user.list},{name:p?(0,i.I)(m):"New user"}]}),(0,E.jsx)(V,{isEdit:p,currentUser:x})]})})}},82558:function(e,n,r){r.d(n,{Z:function(){return y}});var t=r(4942),i=r(63366),a=r(87462),o=r(50317),s=r(83061),l=r(47313),c=r(38743),d=r(54750),u=r(46417),m=(0,d.Z)((0,u.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),p=r(88564),x=r(25469),h=r(91615),f=r(22131);function v(e){return(0,f.Z)("MuiTableSortLabel",e)}var j=(0,r(655).Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),Z=["active","children","className","direction","hideSortIcon","IconComponent"],g=(0,p.ZP)(c.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:function(e,n){var r=e.ownerState;return[n.root,r.active&&n.active]}})((function(e){var n=e.theme;return(0,t.Z)({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:n.palette.text.secondary},"&:hover":(0,t.Z)({color:n.palette.text.secondary},"& .".concat(j.icon),{opacity:.5})},"&.".concat(j.active),(0,t.Z)({color:n.palette.text.primary},"& .".concat(j.icon),{opacity:1,color:n.palette.text.secondary}))})),b=(0,p.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:function(e,n){var r=e.ownerState;return[n.icon,n["iconDirection".concat((0,h.Z)(r.direction))]]}})((function(e){var n=e.theme,r=e.ownerState;return(0,a.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:n.transitions.create(["opacity","transform"],{duration:n.transitions.duration.shorter}),userSelect:"none"},"desc"===r.direction&&{transform:"rotate(0deg)"},"asc"===r.direction&&{transform:"rotate(180deg)"})})),y=l.forwardRef((function(e,n){var r=(0,x.Z)({props:e,name:"MuiTableSortLabel"}),t=r.active,l=void 0!==t&&t,c=r.children,d=r.className,p=r.direction,f=void 0===p?"asc":p,j=r.hideSortIcon,y=void 0!==j&&j,w=r.IconComponent,S=void 0===w?m:w,C=(0,i.Z)(r,Z),N=(0,a.Z)({},r,{active:l,direction:f,hideSortIcon:y,IconComponent:S}),P=function(e){var n=e.classes,r=e.direction,t={root:["root",e.active&&"active"],icon:["icon","iconDirection".concat((0,h.Z)(r))]};return(0,o.Z)(t,v,n)}(N);return(0,u.jsxs)(g,(0,a.Z)({className:(0,s.Z)(P.root,d),component:"span",disableRipple:!0,ownerState:N,ref:n},C,{children:[c,y&&!l?null:(0,u.jsx)(b,{as:S,className:(0,s.Z)(P.icon),ownerState:N})]}))}))}}]);